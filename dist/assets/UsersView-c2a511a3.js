import{z as V,I as E,M as I,G as C,s as O,g as T,N as G,r as A,o as f,k as M,L as i,i as o,b as t,U as R,O as S,a as e,P as B,V as _,d as m,t as u,J as j,w as h,x as w,K as b,c as y,F as U,h as k,S as z,A as F,f as L,j as P,n as q}from"./index-a42bb908.js";const K=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),J={class:"fixed inset-0 z-10 overflow-y-auto"},H={class:"flex min-h-full items-end justify-center p-2 text-center sm:items-center sm:p-0"},Q=e("div",{class:"flex flex-wrap justify-center gap-6 mt-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-16 h-16"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})])],-1),W=e("hr",null,null,-1),X=["onSubmit"],Y={value:"null",selected:"",disabled:""},Z=e("option",{value:"Cédula de ciudadania",class:"font-bold"},"Cédula de ciudadania",-1),ee=e("option",{value:"Número de identificación tributaria",class:"font-bold"},"Número de identificación tributaria",-1),te=e("option",{value:"Tarjeta de identidad",class:"font-bold"},"Tarjeta de identidad",-1),se={value:"null",selected:""},oe=e("option",{value:"DEFAULT",class:"font-bold"},"DEFAULT",-1),ae=e("option",{value:"ADMINISTRADOR",class:"font-bold"},"ADMINISTRADOR",-1),le={value:"null",selected:""},ne=e("option",{value:"BIÓLOGO",class:"font-bold"},"BIÓLOGO",-1),re=e("option",{value:"INGENIERO",class:"font-bold"},"INGENIERO",-1),de=e("option",{value:"ESTUDIANTE",class:"font-bold"},"ESTUDIANTE",-1),ie=e("option",{value:"ABOGADO",class:"font-bold"},"ABOGADO",-1),ce=e("option",{value:"null",selected:"",disabled:""},"Seleccione un departamento...",-1),ue=["value"],me=e("option",{value:"null",selected:"",disabled:""},"Seleccione un municipio...",-1),pe=["value"],_e=e("button",{type:"submit",class:"shadow p-1 w-full rounded-lg bg-green-600 hover:bg-green-700 text-white uppercase font-bold"}," Actualizar ",-1),fe=e("hr",null,null,-1),ye={class:"mt-8 sm:mt-6 flex justify-between gap-4"},he={__name:"ModalUserUpdate",setup(N){const c=V(),$=E(),v=I(),d=C(),s=O({document_type:"",document_number:"",first_name:"",last_name:"",email:"",cellphone:"",rol:"",profession:"",entity:"",department:"",city:""}),g=T(()=>{const r=s.value.department;return r?$.cities.filter(p=>p.department_id===r):[]});async function n(){if(!x()){alert("Por favor complete todos los campos del formulario.");return}try{await F.updateUsers(d.userSelected[0].id,s.value),alert(`Usuario ${d.userSelected[0].email} actualizado`),c.go()}catch(r){r.response&&r.response.data&&r.response.data.error?alert(r.response.data.error):alert("Ocurrió un error al procesar la solicitud.")}}function x(){const r=Object.keys(s.value);for(const l of r)if(!s.value[l])return!1;return!0}const D=()=>{const r=d.userSelected[0];r&&(s.value={document_type:r.document_type||"",document_number:r.document_number||"",first_name:r.first_name||"",last_name:r.last_name||"",email:r.email||"",cellphone:r.cellphone||"",rol:r.rol||"",profession:r.profession||"",entity:r.entity||"",department:r.department||"",city:r.city||""})};return G(()=>d.userSelected,()=>{D()}),(r,l)=>{const p=A("font-awesome-icon");return f(),M(t(z),{as:"template",show:t(v).modalUserUpdate},{default:i(()=>[o(t(R),{as:"div",class:"relative z-10",onClose:l[12]||(l[12]=a=>t(v).handleClickModalUserUpdate())},{default:i(()=>[o(t(S),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[K]),_:1}),e("div",J,[e("div",H,[o(t(S),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:i(()=>[o(t(B),{class:"relative transform overflow-hidden rounded-lg bg-white px-2 pt-2 pb-2 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-3xl sm:p-6"},{default:i(()=>[e("div",null,[e("div",null,[Q,o(t(_),{as:"h4",class:"text-gray-900 text-lg text-center font-extrabold"},{default:i(()=>[m(u(t(d).userSelected[0].first_name)+" "+u(t(d).userSelected[0].last_name),1)]),_:1}),o(t(_),{as:"h4",class:"text-gray-900 text-lg text-center font-extrabold mb-5"},{default:i(()=>[m(u(t(d).userSelected[0].document_number),1)]),_:1}),W,e("form",{onSubmit:j(n,["prevent"])},[o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","address-card"]}),m(" Tipo de documento : "),h(e("select",{name:"rol",id:"state",class:"rounded-lg shadow-lg font-bold mx-3","onUpdate:modelValue":l[0]||(l[0]=a=>s.value.document_type=a)},[e("option",Y,u(t(d).userSelected[0].document_type),1),Z,ee,te],512),[[w,s.value.document_type]])]),_:1}),o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","id-card"]}),m(" Número de documento : "),h(e("input",{type:"number",class:"w-80","onUpdate:modelValue":l[1]||(l[1]=a=>s.value.document_number=a)},null,512),[[b,s.value.document_number]])]),_:1}),o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","signature"]}),m(" Nombres : "),h(e("input",{type:"text",class:"w-80","onUpdate:modelValue":l[2]||(l[2]=a=>s.value.first_name=a)},null,512),[[b,s.value.first_name]])]),_:1}),o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","signature"]}),m(" Apellidos : "),h(e("input",{type:"text",class:"w-80","onUpdate:modelValue":l[3]||(l[3]=a=>s.value.last_name=a)},null,512),[[b,s.value.last_name]])]),_:1}),o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","envelope"]}),m(" correo : "),h(e("input",{type:"email",class:"w-80","onUpdate:modelValue":l[4]||(l[4]=a=>s.value.email=a)},null,512),[[b,s.value.email]])]),_:1}),o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","square-phone"]}),m(" contacto : "),h(e("input",{type:"text",class:"w-80","onUpdate:modelValue":l[5]||(l[5]=a=>s.value.cellphone=a)},null,512),[[b,s.value.cellphone]])]),_:1}),o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","building"]}),m(" Entidad : "),h(e("input",{type:"text",class:"w-80","onUpdate:modelValue":l[6]||(l[6]=a=>s.value.entity=a)},null,512),[[b,s.value.entity]])]),_:1}),o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","briefcase"]}),m(" Rol : "),h(e("select",{name:"rol",id:"rol",class:"rounded-lg shadow-lg font-bold mx-3","onUpdate:modelValue":l[7]||(l[7]=a=>s.value.rol=a)},[e("option",se,u(t(d).userSelected[0].rol),1),oe,ae],512),[[w,s.value.rol]])]),_:1}),o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","briefcase"]}),m(" Profesión : "),h(e("select",{name:"rol",id:"state",class:"rounded-lg shadow-lg font-bold mx-3","onUpdate:modelValue":l[8]||(l[8]=a=>s.value.profession=a)},[e("option",le,u(t(d).userSelected[0].profession),1),ne,re,de,ie],512),[[w,s.value.profession]])]),_:1}),o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","briefcase"]}),m(" Departamento : "),h(e("select",{name:"department",id:"department",class:"rounded-lg shadow-lg font-bold mx-3","onUpdate:modelValue":l[9]||(l[9]=a=>s.value.department=a)},[ce,(f(!0),y(U,null,k(t($).departments,a=>(f(),y("option",{key:a.code,value:a.code},u(a.name),9,ue))),128))],512),[[w,s.value.department]])]),_:1}),o(t(_),{as:"h3",class:"text-gray-900 text-lg my-5"},{default:i(()=>[o(p,{icon:["fas","briefcase"]}),m(" Ciudad : "),h(e("select",{name:"city",id:"city",class:"rounded-lg shadow-lg font-bold mx-3","onUpdate:modelValue":l[10]||(l[10]=a=>s.value.city=a)},[me,(f(!0),y(U,null,k(g.value,a=>(f(),y("option",{key:a.id,value:a.id},u(a.name),9,pe))),128))],512),[[w,s.value.city]])]),_:1}),_e],40,X),fe])]),e("div",ye,[e("button",{type:"button",class:"shadow p-1 w-full rounded-lg bg-gray-700 hover:bg-gray-800 text-white uppercase font-bold",onClick:l[11]||(l[11]=a=>t(v).handleClickModalUserUpdate())}," Cerrar ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}};const ge=e("h1",{class:"text-4xl mb-10 mt-10 text-center font-extrabold"},[m("listado de usuarios "),e("span",{class:"text-customGreen"},"SARA")],-1),xe={class:"flex justify-end mt-5 mb-5"},be=e("label",{class:"p-3 text-lg font-bold rounded-lg mx-3"},"Buscar ",-1),ve=e("hr",null,null,-1),we={class:"w-auto mt-5 mb-10 mx-20"},Ue={class:"bg-slate-50 shadow-md border rounded-lg"},$e=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-gray-600"},"Nombres"),e("th",{class:"px-4 py-2 text-gray-600"},"Email"),e("th",{class:"px-4 py-2 text-gray-600"},"Rol"),e("th",{class:"px-4 py-2 text-gray-600"},"Entidad"),e("th",{class:"px-4 py-2 text-gray-600"},"Celular"),e("th",{class:"px-4 py-2 text-gray-600"},"Departamento"),e("th",{class:"px-4 py-2 text-gray-600"},"Estado"),e("th",{class:"px-4 py-2 text-gray-600"},"Acciones")])],-1),ke={class:"px-4 py-3 border"},Se={class:"px-4 py-3 border"},Ce={class:"px-4 py-3 border"},Ae={class:"px-4 py-3 border"},Ne={class:"px-4 py-3 border"},De={class:"px-4 py-3 border"},Ve={key:0,class:"px-4 py-3 border"},Ee=e("span",{class:"bg-green-100 text-green-800 p-1 text-sm rounded font-bold"}," Activo",-1),Ie=[Ee],Oe={key:1,class:"px-4 py-3 border"},Te=e("span",{class:"bg-red-100 text-red-800 p-1 text-sm rounded font-bold"}," Inactivo",-1),Ge=[Te],Me={class:"px-4 py-3 border"},Re=["onClick"],Be=["onClick"],je=["onClick"],ze={class:"switch"},Fe=["checked","onChange"],Le=e("span",{class:"slider round"},null,-1),Pe=["onChange"],qe={class:"flex justify-center mt-5 mb-10"},Ke=["onClick"],Je={key:0,class:"text-center font-bold text-2xl mt-5 mb-40"},Qe={__name:"UsersView",setup(N){const c=C();L((d,s,g)=>{c.quitarFiltroUsuario(),g()});async function $(d,s){console.log(d),window.confirm(`¿Estás seguro de que desea eliminar el usuario ${s}?`)&&c.deleteUser(d)}function v(d,s){window.confirm(`¿Estás seguro de que deseas ${s===0?"activar":"desactivar"} a este usuario?`)&&(s===1?c.changeStateUser(d,0):c.changeStateUser(d,1))}return(d,s)=>{const g=A("font-awesome-icon");return f(),y(U,null,[ge,e("div",xe,[be,e("input",{class:"p-3 rounded-lg lg:w-1/4 sm:w-full border-2 border-gray-500 py-2 px-4",type:"text",placeholder:"Nombre, Email o rol",onInput:s[0]||(s[0]=n=>t(c).buscarTermino(n.target.value))},null,32)]),ve,e("div",we,[e("table",Ue,[$e,e("tbody",null,[(f(!0),y(U,null,k(t(c).displayedUsers,n=>(f(),y("tr",{key:n.id},[e("td",ke,u(n.first_name+" "+n.last_name),1),e("td",Se,u(n.email),1),e("td",Ce,u(n.rol),1),e("td",Ae,u(n.entity),1),e("td",Ne,u(n.cellphone),1),e("td",De,u(n.name),1),(n.active=1)?(f(),y("td",Ve,Ie)):(f(),y("td",Oe,Ge)),e("td",Me,[e("button",{onClick:x=>t(c).seleccionarUsuario(n.id),class:"btn rounded-lg font-bold p-1 text-white bg-customGreen hover:bg-green-500 hover:shadow-lg"},[o(g,{icon:["fas","eye"]})],8,Re),e("button",{onClick:x=>t(c).selectedUserUpdate(n.id),class:"btn rounded-lg font-bold p-1 text-white bg-customGreen hover:bg-green-500 hover:shadow-lg ml-2"},[o(g,{icon:["fas","user-pen"]})],8,Be),e("button",{onClick:x=>$(n.id,n.first_name),class:"btn rounded-lg font-bold p-1 text-white bg-customGreen hover:bg-green-500 hover:shadow-lg ml-2"},[o(g,{icon:["fas","user-minus"]})],8,je),e("label",ze,[e("input",{type:"checkbox",checked:n.is_active===1,onChange:x=>v(n.id,n.is_active)},null,40,Fe),Le])]),e("td",null,[e("input",{onChange:x=>t(c).seleccionarUsuario(n.id,x.target.value),type:"check",name:"",id:""},null,40,Pe)])]))),128))])]),e("div",qe,[(f(!0),y(U,null,k(t(c).totalPages,n=>(f(),y("button",{key:n,onClick:x=>t(c).changePage(n),class:q(["px-3 py-2 mx-1 rounded-lg bg-customGreen text-white hover:bg-green-600",{"bg-customGreen":n===t(c).currentPage}])},u(n),11,Ke))),128))]),t(c).noResultados?(f(),y("h1",Je," No hay resultados de búsqueda ")):P("",!0),o(he)])],64)}}};export{Qe as default};
