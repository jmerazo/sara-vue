import{K as B,u as R,C as q,h as m,v as S,w,U as b,o as d,c as p,a as l,x as t,N as i,y as u,F as f,i as g,b as C,X as c,M as P,t as h,z as s}from"./index-fa7bc976.js";const F={class:"form__addCandidate"},k=l("div",{class:"title__addCandidate"},[l("span",null,"Registrar nuevo individuo")],-1),$=["onSubmit"],L={class:"form-section data__evaluation"},T=l("label",null,"Código individuo: ",-1),z=["placeholder"],G=l("label",{class:"formulario__label",for:"species"},"Especies:",-1),Z=l("option",{value:"",selected:"",disabled:""},"-- Seleccione una especie --",-1),W=["value"],X=l("label",null,"Fecha: ",-1),Y=l("label",null,"Usuario: ",-1),J=["placeholder"],K={class:"form-section data__ubication"},H=l("label",{class:"formulario__label",for:"departamento"},"Departamento:",-1),Q=l("option",{value:""},"--Seleccione--",-1),ee=["value"],oe={class:"formulario__label",for:"municipio"},le=l("option",{value:""},"-- Seleccione--",-1),ae=["value"],te=l("label",null,"Nombre del predio: ",-1),ne=l("label",null,"Nombre propietario: ",-1),ie=l("label",null,"Corregimiento: ",-1),ue=l("label",null,"Vereda: ",-1),se=l("label",null,"Correo: ",-1),re=l("label",null,"Celular: ",-1),de=l("label",null,"Altitud: ",-1),pe=l("label",null,"Latitud: ",-1),ce=l("option",{value:"N"},"Norte (N)",-1),ve=l("option",{value:"S"},"Sur (S)",-1),me=[ce,ve],_e=l("label",null,"Grados: ",-1),be=l("label",null,"Minutos: ",-1),fe=l("label",null,"Segundos: ",-1),ge=l("label",null,"Longitud: ",-1),he=l("option",{value:"W"},"Oeste (W)",-1),ye=l("option",{value:"E"},"Este (E)",-1),Ve=[he,ye],Ue=l("label",null,"Grados: ",-1),Se=l("label",null,"Minutos: ",-1),Ce=l("label",null,"Segundos: ",-1),je=l("label",null,"Coordenadas decimales: ",-1),xe=l("label",null,"Coordenadas: ",-1),Ee=["placeholder"],De={class:"form-section data__candidate"},Ae=l("label",null,"Altura total: ",-1),Ne=l("label",null,"Altura del fuste: ",-1),Ie=l("label",null,"CAP: ",-1),Me=l("label",null,"Eje X: ",-1),Oe=l("label",null,"Eje Y: ",-1),Be=l("label",null,"Eje Z: ",-1),Re=l("label",null,"Cobertura: ",-1),qe=s('<option value="" disabled selected>-- Seleccione una cobertura --</option><option value="Bosque natural">Bosque natural</option><option value="Rastrojo alto">Rastrojo alto</option><option value="Rastrojo bajo">Rastrojo bajo</option><option value="Cerca viva">Cerca viva</option><option value="Sistema agroforestal">Sistema agroforestal</option><option value="Zonas verdes">Zonas verdes</option><option value="Cultivo forestal (Reforestación)">Cultivo forestal (Reforestación)</option><option value="Árbol aislado en otro tipo de cobertura - ¿Cual?">Árbol aislado en otro tipo de cobertura - ¿Cual?</option>',9),we=[qe],Pe=l("label",null,"Entorno del individuo: ",-1),Fe=s('<option value="" disabled selected>-- Seleccione un entorno --</option><option value="Individuo sólo">Individuo sólo</option><option value="Sistema agroforestal">Sistema agroforestal</option><option value="Agrupación significativa de la misma especie">Agrupación significativa de la misma especie</option><option value="Asociación arbórea con otras especies forestales">Asociación arbórea con otras especies forestales</option><option value="Otro, ¿Cuál?">Otro, ¿Cuál?</option>',6),ke=[Fe],$e=l("label",null,"Especies forestales asociadas: ",-1),Le={class:"form-section data__items"},Te=l("label",null,"Dominancia del individuo forestal: ",-1),ze=s('<option value="" disabled selected>-- Seleccione dominancia --</option><option value="(4) Dominante">(4) Dominante</option><option value="(3) Codominantes">(3) Codominantes</option><option value="(1) Intermedios">(1) Intermedios</option><option value="(0) Dominados">(0) Dominados</option>',5),Ge=[ze],Ze=l("label",null,"Forma del fuste: ",-1),We=s('<option value="" disabled selected>-- Seleccione forma fuste --</option><option value="(6) Recto">(6) Recto</option><option value="(4) Inclinado o ligeramente torcido">(4) Inclinado o ligeramente torcido</option><option value="(3) Torcido o recto torcido">(3) Torcido o recto torcido</option><option value="(1) Muy torcido">(1) Muy torcido</option>',5),Xe=[We],Ye=l("label",null,"Dominancia del eje principal: ",-1),Je=l("option",{value:"",disabled:"",selected:""},"-- Seleccione dominancia eje --",-1),Ke=l("option",{value:"(2) Dominancia completa del eje inicial"},"(2) Dominancia completa del eje inicial",-1),He=l("option",{value:"(1) Dominancia parcial del eje inicial sobre las ramas laterales"},"(1) Dominancia parcial del eje inicial sobre las ramas laterales",-1),Qe=l("option",{value:"(0) Dominancia completa de ramas laterales"},"(0) Dominancia completa de ramas laterales",-1),eo=[Je,Ke,He,Qe],oo=l("label",null,"Altura de la bifurcación: ",-1),lo=s('<option value="" disabled selected>-- Seleccione altura bifurcación --</option><option value="(6) No bifurcado">(6) No bifurcado</option><option value="(4) Bifurcado en el 1/3 superior">(4) Bifurcado en el 1/3 superior</option><option value="(3) Bifurcado en el 1/3 medio">(3) Bifurcado en el 1/3 medio</option><option value="(1) Bifurcado en el 1/3 inferior">(1) Bifurcado en el 1/3 inferior</option>',5),ao=[lo],to=l("label",null,"Estado de la copa: ",-1),no=s('<option value="" disabled selected>-- Seleccione estado copa --</option><option value="(5) Circular">(5) Circular</option><option value="(4) Circular irregular">(4) Circular irregular</option><option value="(3) Medio círculo">(3) Medio círculo</option><option value="(2) Menos de medio círculo">(2) Menos de medio círculo</option><option value="(1) Pocas ramas">(1) Pocas ramas</option>',6),io=[no],uo=l("label",null,"Posición de la copa: ",-1),so=s('<option value="" disabled selected>-- Seleccione posición copa --</option><option value="(5) Emergente">(5) Emergente</option><option value="(4) Plena iluminación superior">(4) Plena iluminación superior</option><option value="(3) Alguna iluminación superior">(3) Alguna iluminación superior</option><option value="(2)  Iluminación lateral">(2) Iluminación lateral</option><option value="(1) Ninguna iluminación directa">(1) Ninguna iluminación directa</option>',6),ro=[so],po=l("label",null,"Estado fitosanitario: ",-1),co=s('<option value="" disabled selected>-- Seleccione estado fitosanitario --</option><option value="(6) Sano">(6) Sano</option><option value="(4) Ataque hasta 1/3 del  fuste">(4) Ataque hasta 1/3 del fuste</option><option value="(3) Ataque hasta 2/3 del  fuste">(3) Ataque hasta 2/3 del fuste</option><option value="(1) Ataque superior a 2/3 del  fuste">(1) Ataque superior a 2/3 del fuste</option>',5),vo=[co],mo=l("label",null,"Presencia de parasitas: ",-1),_o=s('<option value="" disabled selected>-- Seleccione presencia parasitas --</option><option value="(6) Árbol libre de lianas y/ó bejucos">(6) Árbol libre de lianas y/ó bejucos</option><option value="(4) Árbol con lianas y/ó bejucos en el fuste">(4) Árbol con lianas y/ó bejucos en el fuste</option><option value="(2) Árbol con lianas y bejucos en el fuste y copa, presencia leve">(2) Árbol con lianas y bejucos en el fuste y copa, presencia leve</option><option value="(1) Árbol con lianas y bejucos en el fuste y copa grado severo">(1) Árbol con lianas y bejucos en el fuste y copa grado severo</option>',5),bo=[_o],fo=l("label",null,"Resultado: ",-1),go=l("label",null,"Evaluación: ",-1),ho=l("label",null,"Observaciones: ",-1),yo=l("button",{type:"submit"},"Enviar",-1),So={__name:"AddCandidateView",setup(Vo){const y=B(),j=R(),x=q(),E=m(()=>{const n=D(10);let a="";e.value.departamento===86&&(a="001"),e.value.departamento===18&&(a="002"),e.value.departamento===91&&(a="003");const o=new Date().getFullYear().toString().slice(-2);e.value.ShortcutIDEV=n;var r=`PS-${e.value.cod_especie}-${e.value.departamento}-${e.value.municipio}-${n}-${a}-${o}`;return e.value.cod_expediente=r,r});function D(n){for(var a="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=o.length,U=0;U<n;U++)a+=o.charAt(Math.floor(Math.random()*r));return a}const _=m(()=>{const{departamento:n}=e.value;return n?y.cities.filter(o=>o.department_id===n):[]}),e=S({ShortcutIDEV:"",cod_expediente:"",cod_especie:"",fecha_evaluacion:"",usuario_evaluador:"",departamento:"",municipio:"",nombre_del_predio:"",nombre_propietario:"",corregimiento:"",vereda:"",correo:"",celular:"",altitud:"",latitud:"",g_lat:"",m_lat:"",s_lat:"",longitud:"",g_long:"",m_long:"",s_long:"",coordenadas_decimales:"",abcisa_xy:"",altura_total:"",altura_fuste:"",cap:"",eje_x:"",eje_y:"",eje_z:"",cobertura:"",cober_otro:"",entorno_individuo:"",entorno_otro:"",especies_forestales_asociadas:"",dominancia_if:"",forma_fuste:"",dominancia:"",alt_bifurcacion:"",estado_copa:"",posicion_copa:"",fitosanitario:"",presencia:"",resultado:"",evaluacion:"",observaciones:""}),v=S({}),V=localStorage.getItem("user_data");V&&(v.value=JSON.parse(V)),console.log("data user: ",v.value),w(()=>{const n=new Date;e.value.fecha_evaluacion=n.toISOString().split("T")[0],e.value.usuario_evaluador=v.id});function A(){Object.keys(e.value).forEach(n=>{e.value[n]=""})}const N=()=>{console.log("data send: ",e.value);try{x.addCandidate(e.value),console.log(e.value),A()}catch(n){n.response&&n.response.data&&n.response.data.error?alert(n.response.data.error):alert("Ocurrió un error al procesar la solicitud.")}},I=m(()=>{let n=Number(e.value.g_lat)+Number(e.value.m_lat)/60+Number(e.value.s_lat)/3600,a=Number(e.value.g_long)+Number(e.value.m_long)/60+Number(e.value.s_long)/3600;return e.value.latitud==="S"&&(n=-n),e.value.longitud==="E"&&(a=-a),n.toFixed(6)+", "+a.toFixed(6)});b(I,n=>{e.value.coordenadas_decimales=n}),"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(n){const a=n.coords.latitude,o=n.coords.longitude;e.value.abcisa_xy=`${a}, ${o}`},function(n){console.error("Error obteniendo la ubicación: ",n)}):console.log("Geolocalización no está disponible en tu navegador");const M=m(()=>{let n=0;return[e.value.dominancia_if,e.value.forma_fuste,e.value.dominancia,e.value.alt_bifurcacion,e.value.estado_copa,e.value.posicion_copa,e.value.fitosanitario,e.value.presencia].forEach(o=>{const r=o.match(/\((\d+)\)/);r&&r[1]&&(n+=parseInt(r[1],10))}),n});b(M,n=>{e.value.resultado=n});const O=m(()=>{const n=e.value.resultado;return n>34?"El individuo cumple a cabalidad las características como árbol semillero.":n>=28&&n<=34?"El individuo cumple la mayor parte de características pero debe evaluarse algunas condiciones especiales con mayor detenimiento.":n>=18&&n<28?"El individuo no cumple cabalmente las características como árbol semillero, solo se seleccionaría en caso que no se cuente con más individuos.":n<18?"Descartar, el individuo porque no cumple las características como árbol semillero.":""});return b(O,n=>{e.value.evaluacion=n}),(n,a)=>(d(),p("div",F,[k,l("form",{onSubmit:P(N,["prevent"])},[l("div",L,[T,t(l("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>e.value.cod_expediente=o),placeholder:E.value,disabled:""},null,8,z),[[i,e.value.cod_expediente]]),G,t(l("select",{id:"departamento",class:"formulario__input formulario__input--select","onUpdate:modelValue":a[1]||(a[1]=o=>e.value.cod_especie=o)},[Z,(d(!0),p(f,null,g(C(j).especies,o=>(d(),p("option",{key:o.cod_especie,value:o.cod_especie},h(o.cod_especie+" - "+o.nom_comunes+" - "+o.nombre_cientifico),9,W))),128))],512),[[u,e.value.cod_especie]]),X,t(l("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=o=>e.value.fecha_evaluacion=o),placeholder:""},null,512),[[i,e.value.fecha_evaluacion]]),Y,t(l("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=o=>e.value.usuario_evaluador=o),placeholder:v.value.first_name+" "+v.value.last_name,disabled:""},null,8,J),[[i,e.value.usuario_evaluador]])]),l("div",K,[H,t(l("select",{id:"departamento",class:"formulario__input formulario__input--selectc","onUpdate:modelValue":a[4]||(a[4]=o=>e.value.departamento=o)},[Q,(d(!0),p(f,null,g(C(y).departments,o=>(d(),p("option",{key:o.id,value:o.code},h(o.name),9,ee))),128))],512),[[u,e.value.departamento]]),t(l("label",oe,"Ciudad:",512),[[c,_.value.length]]),t(l("select",{id:"municipio",class:"formulario__input formulario__input--select","onUpdate:modelValue":a[5]||(a[5]=o=>e.value.municipio=o)},[le,(d(!0),p(f,null,g(_.value,o=>(d(),p("option",{key:o.id,value:o.id},h(o.name),9,ae))),128))],512),[[u,e.value.municipio],[c,_.value.length]]),te,t(l("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=o=>e.value.nombre_del_predio=o),placeholder:""},null,512),[[i,e.value.nombre_del_predio]]),ne,t(l("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=o=>e.value.nombre_propietario=o),placeholder:""},null,512),[[i,e.value.nombre_propietario]]),ie,t(l("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=o=>e.value.corregimiento=o),placeholder:""},null,512),[[i,e.value.corregimiento]]),ue,t(l("input",{type:"text","onUpdate:modelValue":a[9]||(a[9]=o=>e.value.vereda=o),placeholder:""},null,512),[[i,e.value.vereda]]),se,t(l("input",{type:"email","onUpdate:modelValue":a[10]||(a[10]=o=>e.value.correo=o),placeholder:""},null,512),[[i,e.value.correo]]),re,t(l("input",{type:"tel","onUpdate:modelValue":a[11]||(a[11]=o=>e.value.celular=o),placeholder:""},null,512),[[i,e.value.celular]]),de,t(l("input",{type:"number","onUpdate:modelValue":a[12]||(a[12]=o=>e.value.altitud=o),placeholder:""},null,512),[[i,e.value.altitud,void 0,{number:!0}]]),pe,t(l("select",{"onUpdate:modelValue":a[13]||(a[13]=o=>e.value.latitud=o)},me,512),[[u,e.value.latitud]]),_e,t(l("input",{type:"number","onUpdate:modelValue":a[14]||(a[14]=o=>e.value.g_lat=o),placeholder:""},null,512),[[i,e.value.g_lat,void 0,{number:!0}]]),be,t(l("input",{type:"number","onUpdate:modelValue":a[15]||(a[15]=o=>e.value.m_lat=o),placeholder:""},null,512),[[i,e.value.m_lat,void 0,{number:!0}]]),fe,t(l("input",{type:"number","onUpdate:modelValue":a[16]||(a[16]=o=>e.value.s_lat=o),placeholder:""},null,512),[[i,e.value.s_lat,void 0,{number:!0}]]),ge,t(l("select",{"onUpdate:modelValue":a[17]||(a[17]=o=>e.value.longitud=o)},Ve,512),[[u,e.value.longitud]]),Ue,t(l("input",{type:"number","onUpdate:modelValue":a[18]||(a[18]=o=>e.value.g_long=o),placeholder:""},null,512),[[i,e.value.g_long,void 0,{number:!0}]]),Se,t(l("input",{type:"number","onUpdate:modelValue":a[19]||(a[19]=o=>e.value.m_long=o),placeholder:""},null,512),[[i,e.value.m_long,void 0,{number:!0}]]),Ce,t(l("input",{type:"number","onUpdate:modelValue":a[20]||(a[20]=o=>e.value.s_long=o),placeholder:""},null,512),[[i,e.value.s_long,void 0,{number:!0}]]),je,t(l("input",{type:"text","onUpdate:modelValue":a[21]||(a[21]=o=>e.value.coordenadas_decimales=o),placeholder:"",disabled:""},null,512),[[i,e.value.coordenadas_decimales]]),xe,t(l("input",{type:"text","onUpdate:modelValue":a[22]||(a[22]=o=>e.value.abcisa_xy=o),placeholder:e.value.abcisa_xy,disabled:""},null,8,Ee),[[i,e.value.abcisa_xy]])]),l("div",De,[Ae,t(l("input",{type:"number","onUpdate:modelValue":a[23]||(a[23]=o=>e.value.altura_total=o),placeholder:""},null,512),[[i,e.value.altura_total,void 0,{number:!0}]]),Ne,t(l("input",{type:"number","onUpdate:modelValue":a[24]||(a[24]=o=>e.value.altura_fuste=o),placeholder:""},null,512),[[i,e.value.altura_fuste,void 0,{number:!0}]]),Ie,t(l("input",{type:"number","onUpdate:modelValue":a[25]||(a[25]=o=>e.value.cap=o),placeholder:""},null,512),[[i,e.value.cap,void 0,{number:!0}]]),Me,t(l("input",{type:"number","onUpdate:modelValue":a[26]||(a[26]=o=>e.value.eje_x=o),placeholder:""},null,512),[[i,e.value.eje_x,void 0,{number:!0}]]),Oe,t(l("input",{type:"number","onUpdate:modelValue":a[27]||(a[27]=o=>e.value.eje_y=o),placeholder:""},null,512),[[i,e.value.eje_y,void 0,{number:!0}]]),Be,t(l("input",{type:"number","onUpdate:modelValue":a[28]||(a[28]=o=>e.value.eje_z=o),placeholder:""},null,512),[[i,e.value.eje_z,void 0,{number:!0}]]),Re,t(l("select",{"onUpdate:modelValue":a[29]||(a[29]=o=>e.value.cobertura=o)},we,512),[[u,e.value.cobertura]]),t(l("label",null,"Otra cobertura: ",512),[[c,e.value.cobertura==="Árbol aislado en otro tipo de cobertura - ¿Cual?"]]),t(l("input",{type:"text","onUpdate:modelValue":a[30]||(a[30]=o=>e.value.cober_otro=o),placeholder:""},null,512),[[c,e.value.cobertura==="Árbol aislado en otro tipo de cobertura - ¿Cual?"],[i,e.value.cober_otro]]),Pe,t(l("select",{"onUpdate:modelValue":a[31]||(a[31]=o=>e.value.entorno_individuo=o)},ke,512),[[u,e.value.entorno_individuo]]),t(l("label",null,"Otro entorno del individuo: ",512),[[c,e.value.entorno_individuo==="Otro, ¿Cuál?"]]),t(l("input",{type:"text","onUpdate:modelValue":a[32]||(a[32]=o=>e.value.entorno_otro=o),placeholder:""},null,512),[[c,e.value.entorno_individuo==="Otro, ¿Cuál?"],[i,e.value.entorno_otro]]),$e,t(l("input",{type:"text","onUpdate:modelValue":a[33]||(a[33]=o=>e.value.especies_forestales_asociadas=o),placeholder:""},null,512),[[i,e.value.especies_forestales_asociadas]])]),l("div",Le,[Te,t(l("select",{"onUpdate:modelValue":a[34]||(a[34]=o=>e.value.dominancia_if=o)},Ge,512),[[u,e.value.dominancia_if]]),Ze,t(l("select",{"onUpdate:modelValue":a[35]||(a[35]=o=>e.value.forma_fuste=o)},Xe,512),[[u,e.value.forma_fuste]]),Ye,t(l("select",{"onUpdate:modelValue":a[36]||(a[36]=o=>e.value.dominancia=o)},eo,512),[[u,e.value.dominancia]]),oo,t(l("select",{"onUpdate:modelValue":a[37]||(a[37]=o=>e.value.alt_bifurcacion=o)},ao,512),[[u,e.value.alt_bifurcacion]]),to,t(l("select",{"onUpdate:modelValue":a[38]||(a[38]=o=>e.value.estado_copa=o)},io,512),[[u,e.value.estado_copa]]),uo,t(l("select",{"onUpdate:modelValue":a[39]||(a[39]=o=>e.value.posicion_copa=o)},ro,512),[[u,e.value.posicion_copa]]),po,t(l("select",{"onUpdate:modelValue":a[40]||(a[40]=o=>e.value.fitosanitario=o)},vo,512),[[u,e.value.fitosanitario]]),mo,t(l("select",{"onUpdate:modelValue":a[41]||(a[41]=o=>e.value.presencia=o)},bo,512),[[u,e.value.presencia]]),fo,t(l("input",{type:"number","onUpdate:modelValue":a[42]||(a[42]=o=>e.value.resultado=o),placeholder:"",disabled:""},null,512),[[i,e.value.resultado,void 0,{number:!0}]]),go,t(l("textarea",{"onUpdate:modelValue":a[43]||(a[43]=o=>e.value.evaluacion=o),placeholder:"",disabled:""},null,512),[[i,e.value.evaluacion]]),ho,t(l("textarea",{"onUpdate:modelValue":a[44]||(a[44]=o=>e.value.observaciones=o),placeholder:""},null,512),[[i,e.value.observaciones]])]),yo],40,$)]))}};export{So as default};
