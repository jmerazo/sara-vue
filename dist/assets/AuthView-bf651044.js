import{_ as F,M as O,a as j,J as $,N as q,O as z,r as _,h as G,b as r,c,d as e,n as U,l as H,y as J,m as L,K,w as i,x as n,t as w,H as B,F as A,i as D,P as Q,Q as W,S as Y,p as X,e as e1}from"./index-58a73ee5.js";import{u as o1}from"./users-3018045e.js";import{l as s1}from"./locates-b3be1fc3.js";import{L as t1}from"./LoadingData-b11b812f.js";import"./modal-07ceaae3.js";/* empty css                                                                    */const a1="/icons/google.png",l1="/icons/outlook.png",i1="/img/auth/login-man2.svg",n1="/img/auth/login-woman2.svg";const a=m=>(X("data-v-21e78727"),m=m(),e1(),m),r1={class:"login__content"},c1={class:"forms"},d1=["onSubmit"],u1=a(()=>e("h2",{class:"title"},"Iniciar sesión",-1)),_1={class:"form__field"},p1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3ZM20 7.23792L12.0718 14.338L4 7.21594V19H20V7.23792ZM4.51146 5L12.0619 11.662L19.501 5H4.51146Z"})])],-1)),v1={class:"form__field"},m1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM5 10V20H19V10H5ZM11 14H13V16H11V14ZM7 14H9V16H7V14ZM15 14H17V16H15V14ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16Z"})])],-1)),C1={key:0,class:"error"},h1=a(()=>e("input",{type:"submit",value:"Ingresar",class:"login__button solid"},null,-1)),g1={class:"form__sign-up"},w1=a(()=>e("h2",{class:"title"},"Solicitar ingreso",-1)),V1={class:"form__field"},f1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M7.78428 14L8.2047 10H4V8H8.41491L8.94043 3H10.9514L10.4259 8H14.4149L14.9404 3H16.9514L16.4259 8H20V10H16.2157L15.7953 14H20V16H15.5851L15.0596 21H13.0486L13.5741 16H9.58509L9.05957 21H7.04855L7.57407 16H4V14H7.78428ZM9.7953 14H13.7843L14.2047 10H10.2157L9.7953 14Z"})])],-1)),H1={class:"form__field"},L1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M14 14.252V16.3414C13.3744 16.1203 12.7013 16 12 16C8.68629 16 6 18.6863 6 22H4C4 17.5817 7.58172 14 12 14C12.6906 14 13.3608 14.0875 14 14.252ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11ZM18 17V14H20V17H23V19H20V22H18V19H15V17H18Z"})])],-1)),y1={class:"form__field"},M1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M14 14.252V16.3414C13.3744 16.1203 12.7013 16 12 16C8.68629 16 6 18.6863 6 22H4C4 17.5817 7.58172 14 12 14C12.6906 14 13.3608 14.0875 14 14.252ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11ZM18 17V14H20V17H23V19H20V22H18V19H15V17H18Z"})])],-1)),Z1={class:"form__field"},x1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M9.36556 10.6821C10.302 12.3288 11.6712 13.698 13.3179 14.6344L14.2024 13.3961C14.4965 12.9845 15.0516 12.8573 15.4956 13.0998C16.9024 13.8683 18.4571 14.3353 20.0789 14.4637C20.599 14.5049 21 14.9389 21 15.4606V19.9234C21 20.4361 20.6122 20.8657 20.1022 20.9181C19.5723 20.9726 19.0377 21 18.5 21C9.93959 21 3 14.0604 3 5.5C3 4.96227 3.02742 4.42771 3.08189 3.89776C3.1343 3.38775 3.56394 3 4.07665 3H8.53942C9.0611 3 9.49513 3.40104 9.5363 3.92109C9.66467 5.54288 10.1317 7.09764 10.9002 8.50444C11.1427 8.9484 11.0155 9.50354 10.6039 9.79757L9.36556 10.6821ZM6.84425 10.0252L8.7442 8.66809C8.20547 7.50514 7.83628 6.27183 7.64727 5H5.00907C5.00303 5.16632 5 5.333 5 5.5C5 12.9558 11.0442 19 18.5 19C18.667 19 18.8337 18.997 19 18.9909V16.3527C17.7282 16.1637 16.4949 15.7945 15.3319 15.2558L13.9748 17.1558C13.4258 16.9425 12.8956 16.6915 12.3874 16.4061L12.3293 16.373C10.3697 15.2587 8.74134 13.6303 7.627 11.6707L7.59394 11.6126C7.30849 11.1044 7.05754 10.5742 6.84425 10.0252Z"})])],-1)),b1={class:"form__field"},k1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3ZM20 7.23792L12.0718 14.338L4 7.21594V19H20V7.23792ZM4.51146 5L12.0619 11.662L19.501 5H4.51146Z"})])],-1)),S1={class:"form__field"},U1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M4 6.14286V18.9669L9.06476 16.7963L15.0648 19.7963L20 17.6812V4.85714L21.303 4.2987C21.5569 4.18992 21.8508 4.30749 21.9596 4.56131C21.9862 4.62355 22 4.69056 22 4.75827V19L15 22L9 19L2.69696 21.7013C2.44314 21.8101 2.14921 21.6925 2.04043 21.4387C2.01375 21.3765 2 21.3094 2 21.2417V7L4 6.14286ZM16.2426 11.2426L12 15.4853L7.75736 11.2426C5.41421 8.89949 5.41421 5.10051 7.75736 2.75736C10.1005 0.414214 13.8995 0.414214 16.2426 2.75736C18.5858 5.10051 18.5858 8.89949 16.2426 11.2426ZM12 12.6569L14.8284 9.82843C16.3905 8.26633 16.3905 5.73367 14.8284 4.17157C13.2663 2.60948 10.7337 2.60948 9.17157 4.17157C7.60948 5.73367 7.60948 8.26633 9.17157 9.82843L12 12.6569Z"})])],-1)),B1=a(()=>e("option",{value:""},"--Departamento--",-1)),A1=["value"],D1={class:"form__field"},I1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 19V5.70046C3 5.27995 3.26307 4.90437 3.65826 4.76067L13.3291 1.24398C13.5886 1.14961 13.8755 1.28349 13.9699 1.54301C13.9898 1.59778 14 1.65561 14 1.71388V6.6667L20.3162 8.77211C20.7246 8.90822 21 9.29036 21 9.72079V19H23V21H1V19H3ZM5 19H12V3.85543L5 6.40089V19ZM19 19V10.4416L14 8.77488V19H19Z"})])],-1)),R1=["disabled"],T1=a(()=>e("option",{value:""},"--Ciudad--",-1)),E1=["value"],N1={class:"form__field"},P1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM5 10V20H19V10H5ZM11 14H13V16H11V14ZM7 14H9V16H7V14ZM15 14H17V16H15V14ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16Z"})])],-1)),F1={class:"form__field"},O1=a(()=>e("div",{class:"icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 14.1364 21.3301 16.1162 20.1889 17.741L17 12H20C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C14.1502 20 16.1023 19.1517 17.5398 17.7716L18.5379 19.567C16.7848 21.083 14.4995 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12 7C13.6569 7 15 8.34315 15 10V11H16V16H8V11H9V10C9 8.34315 10.3431 7 12 7ZM14 13H10V14H14V13ZM12 9C11.4872 9 11.0645 9.38604 11.0067 9.88338L11 10V11H13V10C13 9.48716 12.614 9.06449 12.1166 9.00673L12 9Z"})])],-1)),j1={key:0,class:"error"},$1={class:"content__registerOauth2"},q1=a(()=>e("p",null,"Registrarse con: ",-1)),z1={class:"logos__container"},G1=a(()=>e("img",{src:a1,class:"logos__oauth2"},null,-1)),J1=[G1],K1=a(()=>e("img",{src:l1,class:"logos__oauth2"},null,-1)),Q1=[K1],W1=a(()=>e("h3",null,"¿Deseas solicitar acceso a SARA?",-1)),Y1=a(()=>e("p",null,"Diligencia el formulario y recibirás las instrucciones en tu email.",-1)),X1=a(()=>e("img",{class:"image",src:i1,alt:"img-auth"},null,-1)),ee=a(()=>e("h3",null,"¿Ya eres usuario SARA? ",-1)),oe=a(()=>e("p",null,"Si tienes una cuenta validada ingresa tus credenciales",-1)),se=a(()=>e("img",{class:"image",src:n1,alt:"img-auth"},null,-1)),te={__name:"AuthView",setup(m){const y=s1(),V=O(),M=o1(),I=j(),{addToast:d}=$(),R=q(),{executeRecaptcha:Z,recaptchaLoaded:T}=z(),p=_(""),C=_(""),u=_(null),v=_(!1);_(!0);const E=async()=>{try{await T();const l=await Z("login");(await V.loginFirebase(p.value,C.value,l)).success?I.push({name:"home-panel"}):d(`Usuario: ${p.value} o credenciales inválidas`,{type:"warning",duration:4e3})}catch(l){d(l,{type:"error",duration:4e3})}},t=_({document_type:"Cédula de ciudadanía",document_number:"",first_name:"",last_name:"",email:"",cellphone:"",password:"",confirm_password:"",department:"",city:""});function x(){return v.value=!v.value,v.value}const b=G(()=>{const{department:l}=t.value;return l?y.cities.filter(o=>o.department===l):[]});async function k(l){if(l.preventDefault(),v.value){if(Object.values(t.value).includes("")){f("Todos los campos son obligatorios");return}if(t.value.password!==t.value.confirm_password){f("Las contraseñas no coinciden");return}try{const o=await Z("register");await M.createUser({...t.value,recaptcha_token:o}),N(),window.location.reload()}catch(o){console.log(o),d("Error en el registro",{type:"error",duration:4e3})}}else{if(p.value===""||C.value===""){f("Todos los campos son obligatorios");return}E()}}async function S(l){var o,s;try{let h;switch(l){case"google":h=new W;break;case"microsoft":h=new Q("microsoft.com");break;default:throw new Error("Proveedor no soportado")}const g=(await Y(R,h)).user,P={email:g.email,first_name:((o=g.displayName)==null?void 0:o.split(" ")[0])||"",last_name:((s=g.displayName)==null?void 0:s.split(" ").slice(1).join(" "))||"",uuid_firebase:g.uid,provider:l,is_social_auth:!0,department:0,city:1128};try{await M.createUser(P),d("Registro social exitoso. Por favor, complete su perfil.",{type:"success",duration:4e3}),window.location.reload()}catch{d("Error en el registro con red social",{type:"error",duration:4e3})}}catch{d("Error en la autenticación con red social",{type:"error",duration:4e3})}}function N(){Object.keys(t.value).forEach(l=>{t.value[l]=""})}function f(l){u.value=l,setTimeout(()=>{u.value=null},3e3)}return(l,o)=>(r(),c("div",{class:U(["container__login",{mode__signin:v.value}])},[e("div",r1,[e("div",c1,[e("div",{class:U(["loading__auth",{active:H(V).loading}])},[H(V).loading?(r(),J(t1,{key:0})):L("",!0)],2),e("form",{class:"form__sign-in",onSubmit:K(k,["prevent"])},[u1,e("div",_1,[p1,i(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>p.value=s),placeholder:"Correo electrónico"},null,512),[[n,p.value]])]),e("div",v1,[m1,i(e("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=s=>C.value=s),placeholder:"Contraseña"},null,512),[[n,C.value]])]),u.value?(r(),c("p",C1,w(u.value),1)):L("",!0),h1],40,d1),e("form",g1,[w1,e("div",V1,[f1,i(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>t.value.document_number=s),placeholder:"No. Identificación"},null,512),[[n,t.value.document_number]])]),e("div",H1,[L1,i(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>t.value.first_name=s),placeholder:"Nombres"},null,512),[[n,t.value.first_name]])]),e("div",y1,[M1,i(e("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=s=>t.value.last_name=s),placeholder:"Apellidos"},null,512),[[n,t.value.last_name]])]),e("div",Z1,[x1,i(e("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=s=>t.value.cellphone=s),placeholder:"Celular"},null,512),[[n,t.value.cellphone]])]),e("div",b1,[k1,i(e("input",{type:"email","onUpdate:modelValue":o[6]||(o[6]=s=>t.value.email=s),placeholder:"Correo electrónico"},null,512),[[n,t.value.email]])]),e("div",S1,[U1,i(e("select",{"onUpdate:modelValue":o[7]||(o[7]=s=>t.value.department=s),style:{color:"gray"},name:"department",id:"department"},[B1,(r(!0),c(A,null,D(H(y).departments,s=>(r(),c("option",{key:s.id,value:s.code},w(s.name),9,A1))),128))],512),[[B,t.value.department]])]),e("div",D1,[I1,i(e("select",{disabled:b.value.length===0,"onUpdate:modelValue":o[8]||(o[8]=s=>t.value.city=s),style:{color:"gray"},name:"city",id:"city"},[T1,(r(!0),c(A,null,D(b.value,s=>(r(),c("option",{key:s.id,value:s.id},w(s.name),9,E1))),128))],8,R1),[[B,t.value.city]])]),e("div",N1,[P1,i(e("input",{type:"password","onUpdate:modelValue":o[9]||(o[9]=s=>t.value.password=s),placeholder:"Contraseña"},null,512),[[n,t.value.password]])]),e("div",F1,[O1,i(e("input",{type:"password","onUpdate:modelValue":o[10]||(o[10]=s=>t.value.confirm_password=s),placeholder:"Confirmar Contraseña"},null,512),[[n,t.value.confirm_password]])]),u.value?(r(),c("p",j1,w(u.value),1)):L("",!0),e("input",{onClick:k,type:"submit",value:"Enviar",class:"login__button solid"}),e("div",$1,[q1,e("div",z1,[e("div",{class:"logo",onClick:o[11]||(o[11]=s=>S("google"))},J1),e("div",{class:"logo",onClick:o[12]||(o[12]=s=>S("microsoft"))},Q1)])])])])]),e("div",{class:"walls__container"},[e("div",{class:"wall wall__left"},[e("div",{class:"wall__content"},[W1,Y1,e("button",{onClick:x,class:"login__button transparent"}," Solicitar ")]),X1]),e("div",{class:"wall wall__right"},[e("div",{class:"wall__content"},[ee,oe,e("button",{onClick:x,class:"login__button transparent"}," Ingresar ")]),se])])],2))}},_e=F(te,[["__scopeId","data-v-21e78727"]]);export{_e as default};
