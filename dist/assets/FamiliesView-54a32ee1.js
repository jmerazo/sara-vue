import{B as I,r as g,o as B,C as V,h,_ as $,b as i,c as l,d as a,t as p,j as q,l as o,p as w,e as C,g as E,a as T,F as k,i as F,m as f,s as j,v as L,w as N,x as R,q as b,y as D,n as z}from"./index-58a73ee5.js";import{u as P}from"./consulta-e9495bee.js";import{u as A}from"./modal-07ceaae3.js";import{B as O}from"./ButtonTop-90692b96.js";const Z=I("familias",()=>{const s=g([]),e=g([]),r=P(),d=g(1),m=g(10);B(async()=>{r.cargando=!0;const{data:c}=await V.getFamiliesData();s.value=c,e.value=c,r.cargando=!1});const v=h(()=>Math.ceil(s.value.length/m.value)),n=h(()=>{const c=(d.value-1)*m.value,y=c+m.value;return s.value.slice(c,y)});function _(c){c>=1&&c<=v.value&&(d.value=c)}function t(){e&&(s.value=e.value)}function u(c){_(1),s.value=e.value.filter(y=>{const M=c.toLowerCase();return(y.familia?y.familia.toLowerCase():"").includes(M)})}return{currentPage:d,itemsPerPage:m,totalPages:v,displayedFamilias:n,familias:s,buscarTermino:u,quitarFiltroFamilia:t,changePage:_}});const U=s=>(w("data-v-ab983d0b"),s=s(),C(),s),G={class:"card"},H={class:"front__content"},J={class:"card__label"},K={class:"back"},Q={class:"card__text"},W=U(()=>a("span",null,"Ver Especies",-1)),X=[W],Y={__name:"Family",props:{familia:{type:Object}},setup(s){const e=P();return(r,d)=>(i(),l("div",G,[a("div",{class:"front",style:q({backgroundImage:"url(/img/backgroundCard/background-family.jpeg)"})},[a("div",H,[a("p",J,p(s.familia.familia),1)])],4),a("div",K,[a("p",Q,p(s.familia.description),1),a("button",{class:"card__boton animacion",onClick:d[0]||(d[0]=m=>o(e).selectFamily(s.familia.familia))},X)])]))}},aa=$(Y,[["__scopeId","data-v-ab983d0b"]]);const x=s=>(w("data-v-11fa23e8"),s=s(),C(),s),ea={key:0,class:"modal"},sa={class:"modal__contenido"},oa={class:"modal__heading"},ta=x(()=>a("p",{class:"modal__texto"},"Esta familia agrupa las siguientes especies:",-1)),ia=x(()=>a("hr",null,null,-1)),na={class:"listado__contenido"},la={class:"especies"},ca={class:"especie__dato"},ra=["onClick"],da=x(()=>a("span",null,"Ver especie",-1)),_a=[da],ua={class:"modal__botones"},ma={__name:"ModalFamily",setup(s){const e=E(),r=A(),d=P(),m=h(()=>e.name==="home"),v=T(),n=()=>{v.push("/familias")};return(_,t)=>o(r).modalFamily?(i(),l("div",ea,[a("div",sa,[a("h3",oa,p(o(d).strFamilia),1),ta,ia,a("div",na,[a("div",la,[(i(!0),l(k,null,F(o(d).familia,u=>(i(),l("div",{class:"especie",key:u.familia},[a("p",ca,p(u.vernacularName)+" - "+p(u.nombre_cientifico),1),a("button",{class:"card__boton animacion",onClick:c=>(o(d).consultSpecie(u.code_specie),o(r).handleClickModalFamily())},_a,8,ra)]))),128))])]),a("div",ua,[m.value?(i(),l("button",{key:0,type:"button",class:"modal__botonMas",onClick:t[0]||(t[0]=u=>(n(),o(r).handleClickModalFamily()))}," Ver Todas las Familias ")):f("",!0),a("button",{type:"button",class:"modal__botonCerrar",onClick:t[1]||(t[1]=u=>o(r).handleClickModalFamily())}," Cerrar ")])])])):f("",!0)}},pa=$(ma,[["__scopeId","data-v-11fa23e8"]]);const S=s=>(w("data-v-1d969904"),s=s(),C(),s),va={class:"header__familias"},fa={class:"header__contenido"},ga={class:"header__formulario"},ha=S(()=>a("h1",{class:"familias__heading"},"Listado de Familias forestales",-1)),ya={class:"formulario"},ba=S(()=>a("div",{class:"formulario__icono"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15.75 15.75-2.489-2.489m0 0a3.375 3.375 0 1 0-4.773-4.773 3.375 3.375 0 0 0 4.774 4.774ZM21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])],-1)),ka={key:0,class:"formulario__resultados"},Fa={key:1,class:"formulario__resultados"},$a={key:0,class:"familias__enunciado"},wa={class:"familias"},Ca={class:"familias__grid"},Pa={class:"paginador"},xa={class:"paginador__botones"},Sa=["onClick"],Ma={class:"validacion__contenido"},Ia={key:0,class:"validacion__heading"},Ba={__name:"FamiliesView",setup(s){const e=Z(),r=g(""),d=h(()=>r.value!=="");j((v,n,_)=>{e.quitarFiltroFamilia(),_()});const m=h(()=>{const v=e.currentPage,n=e.totalPages,_=Math.max(1,v-1),t=Math.min(n,_+3);return Array.from({length:t-_+1},(u,c)=>_+c)});return(v,n)=>{const _=L("font-awesome-icon");return i(),l("div",null,[a("header",va,[a("div",fa,[a("div",ga,[ha,a("div",ya,[N(a("input",{class:"formulario__input",type:"text",placeholder:"Escríbe el nombre de la familia","onUpdate:modelValue":n[0]||(n[0]=t=>r.value=t),onInput:n[1]||(n[1]=t=>o(e).buscarTermino(t.target.value))},null,544),[[R,r.value]]),ba]),d.value?(i(),l("p",ka,p(o(e).displayedFamilias.length)+" "+p(o(e).displayedFamilias.length===1?"resultado encontrado":"resultados encontrados")+" para "+p(r.value),1)):(i(),l("p",Fa," Buscar una Familia y ver las especies que la componen "))]),o(e).familias.length!=0?(i(),l("h3",$a,' En el contexto de las especies forestales y la taxonomía biológica, una "familia" es una categoría de clasificación que agrupa a un conjunto de plantas que comparten ciertas características similares y están relacionadas evolutivamente. ')):f("",!0)])]),a("main",wa,[a("div",Ca,[(i(!0),l(k,null,F(o(e).displayedFamilias,t=>(i(),D(aa,{key:t.familia,familia:t},null,8,["familia"]))),128))])]),a("section",Pa,[a("div",xa,[o(e).currentPage>1?(i(),l("button",{key:0,class:"paginador__boton paginador__boton--anterior",onClick:n[2]||(n[2]=t=>o(e).changePage(o(e).currentPage-1))},[b(_,{icon:["fas","angles-left"]})])):f("",!0),(i(!0),l(k,null,F(m.value,t=>(i(),l("button",{key:t,onClick:u=>o(e).changePage(t),class:z(["paginador__boton",{"paginador__boton-actual":t===o(e).currentPage}])},p(t),11,Sa))),128)),o(e).currentPage<o(e).totalPages?(i(),l("button",{key:1,class:"paginador__boton paginador__boton--siguiente",onClick:n[3]||(n[3]=t=>o(e).changePage(o(e).currentPage+1))},[b(_,{icon:["fas","angles-right"]})])):f("",!0)])]),a("section",Ma,[o(e).noResultados?(i(),l("h1",Ia," No hay resultados de búsqueda ")):f("",!0)]),b(pa),b(O)])}}},La=$(Ba,[["__scopeId","data-v-1d969904"]]);export{La as default};
