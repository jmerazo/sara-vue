import{i as h,j as l,A as _,q as b,o as p,c as v,a as s,w,s as f,v as g,t as k,d as y}from"./index-c537f2e9.js";const x=h("authToken",()=>{const n=l(localStorage.getItem("access_token")||null),r=l(localStorage.getItem("refresh_token")||null),o=l(null);return{accessToken:n,refreshToken:r,login:async a=>{try{const e=await _.getAuthToken(a);return e.status===200?(n.value=e.data.access,r.value=e.data.refresh,localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),o.value=null,{success:!0}):(o.value="Credenciales incorrectas",{success:!1})}catch(e){return console.error("Error en el inicio de sesi칩n:",e),o.value=e,{success:!1,error:e}}},logout:()=>{n.value=null,r.value=null,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")},errorAuth:o}}),S={class:"h-screen flex justify-center items-center mb-8"},I={class:"w-full max-w-md relative bg-white p-8 rounded-lg shadow-lg backdrop-blur-lg backdrop-opacity-50"},T=s("h2",{class:"text-2xl font-bold mb-4 text-center"},"Iniciar sesi칩n",-1),A=["onSubmit"],V=s("label",{for:"email",class:"block font-semibold mb-1"},"Usuario",-1),C=s("label",{for:"password",class:"block font-semibold mb-1"},"Contrase침a",-1),q=s("button",{type:"submit",class:"w-full bg-green-500 text-white font-semibold rounded-lg py-2"},"Ingresar",-1),B={key:0,class:"text-red-500 mt-2"},U={__name:"AuthView",setup(n){const r=x(),o=b(),c=l(""),u=l(""),a=l(null),e=async()=>{const i={username:c.value,password:u.value};try{const t=await r.login(i);console.log("r: ",t),t.success?o.push({name:"aboutus"}):m("Credenciales inv치lidas")}catch(t){m(t.message)}},m=i=>{a.value=i,setTimeout(()=>{a.value=null},3e3)};return(i,t)=>(p(),v("div",S,[s("div",I,[T,s("form",{onSubmit:w(e,["prevent"]),class:"space-y-4"},[s("div",null,[V,f(s("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>c.value=d),type:"text",id:"username",class:"w-full rounded-lg border px-4 py-2",required:""},null,512),[[g,c.value]])]),s("div",null,[C,f(s("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>u.value=d),type:"password",id:"password",class:"w-full rounded-lg border px-4 py-2",required:""},null,512),[[g,u.value]])]),q,a.value?(p(),v("div",B,k(a.value),1)):y("",!0)],40,A)])]))}};export{U as default};
